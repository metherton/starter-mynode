<!DOCTYPE html>
<!-- saved from url=(0081)https://dl.dropboxusercontent.com/u/11489766/twilio/elearning/client_browser.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Twilio Client</title>
    <script type="text/javascript" src="//static.twilio.com/libs/twiliojs/1.2/twilio.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js">
    </script>
    <link href="//static0.twilio.com/packages/quickstart/client.css" type="text/css" rel="stylesheet" />

    <script type="text/javascript">

        Twilio.Device.setup('<%= token %>', { debug: true });

      Twilio.Device.ready(function (device) {
        $("#log").text("Ready");
      });
      Twilio.Device.error(function (error) {
        $("#log").text("Error: " + error.message);
      });

    </script>

    <script type="text/javascript">
        Twilio.Device.incoming(function (connection) {
            if (confirm('Accept incoming call from ' + connection.parameters.From + '?')) {
                connection.accept();
            } else {
                connection.reject();
            }
        });
    </script>

    <script type="text/javascript">
        Twilio.Device.disconnect(function (conn) {
            $("#log").text("Call ended");
        });
    </script>

  </head>
  <body>
    <button class="call" onclick="call();">
      Call
    </button>
    <!-- Additional HTML -->
    <button class="hangup" onclick="hangup();">Hangup</button>
    <script type="text/javascript">
        function hangup() {
            Twilio.Device.disconnectAll();
        }
    </script>

    <br />
    <!-- Additional HTML -->
    <input type="text" id="number" name="number" placeholder="Enter a phone number to call"/>
    <script type="text/javascript">
        // updating our call() function
        function call() {
            // using jquery to get the value of the element with id 'number'
            params = {"tocall": $("#number").val()};
            Twilio.Device.connect(params);
        }
    </script>


    <div id="log">Loading...</div>
  
<script type="text/javascript">(function () {
        return window.SIG_EXT = {};
      })()</script><div style="position: fixed; z-index: 99999; top: 0px; left: 0px; width: 1px; height: 1px; overflow: hidden; visibility: hidden;"><div style="margin: 10% auto 0px; width: 215px; border-radius: 8px; border: 8px solid rgb(160, 160, 160); background-color: rgb(248, 248, 248);"><button>Close</button></div></div></body></html>